
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometry reference &#8212; phidl_geometry_test  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="geometry-reference">
<h1>Geometry reference<a class="headerlink" href="#geometry-reference" title="Permalink to this headline">¶</a></h1>
<p>Geometry and function reference for <a class="reference external" href="https://github.com/amccaugh/phidl">PHIDL</a>, an open-source Python GDS layout and CAD geometry creation tool</p>
<p>Note: This is still a work-in-progress. For a more complete tutorial please see  <a class="reference external" href="https://github.com/amccaugh/phidl/blob/master/phidl/phidl_tutorial_example.py">the tutorial here</a></p>
<div class="section" id="basic-shapes">
<h2>Basic shapes<a class="headerlink" href="#basic-shapes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rectangle">
<h3>Rectangle<a class="headerlink" href="#rectangle" title="Permalink to this headline">¶</a></h3>
<p>To create a simple rectangle, there are two functions.  The first is <code class="docutils literal notranslate"><span class="pre">pg.rectangle()</span></code> which creates a basic rectangle:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mf">4.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/rectangle.png" class="align-center" src="../_images/rectangle.png" />
<p>The other way to create a rectangle is to define one by its bounding box using <code class="docutils literal notranslate"><span class="pre">pg.bbox()</span></code>.  This is useful if you want to create a rectangle which exactly surrounds a piece of existing geometry.  For example, if we have an arc geometry and we want to define a box around it, we can use <code class="docutils literal notranslate"><span class="pre">pg.bbox()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">arc</span> <span class="o">=</span> <span class="n">D</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="mi">85</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
 <span class="c1"># Draw a rectangle around the arc we created by using the arc&#39;s bounding box</span>
<span class="n">rect</span> <span class="o">=</span> <span class="n">D</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="n">bbox</span> <span class="o">=</span> <span class="n">arc</span><span class="o">.</span><span class="n">bbox</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/bbox.png" class="align-center" src="../_images/bbox.png" />
</div>
<div class="section" id="cross">
<h3>Cross<a class="headerlink" href="#cross" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.cross()</span></code> function creates a cross structure:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/cross.png" class="align-center" src="../_images/cross.png" />
</div>
<div class="section" id="ellipse">
<h3>Ellipse<a class="headerlink" href="#ellipse" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.ellipse()</span></code> function creates an ellipse by defining the major and minor radii:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">radii</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">angle_resolution</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/ellipse.png" class="align-center" src="../_images/ellipse.png" />
</div>
<div class="section" id="circle">
<h3>Circle<a class="headerlink" href="#circle" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.circle()</span></code> function creates a circle:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">angle_resolution</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/circle.png" class="align-center" src="../_images/circle.png" />
</div>
<div class="section" id="ring">
<h3>Ring<a class="headerlink" href="#ring" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.ring()</span></code> function creates a ring.  The radius refers to the center radius of the ring structure (halfway between the inner and outer radius).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ring</span><span class="p">(</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">angle_resolution</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/ring.png" class="align-center" src="../_images/ring.png" />
</div>
<div class="section" id="arc">
<h3>Arc<a class="headerlink" href="#arc" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.arc()</span></code> function creates an arc.  The radius refers to the center radius of the arc (halfway between the inner and outer radius).  The arc has two ports, <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>, on either end, allowing you to easily connect it to other structures.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="n">radius</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="mi">45</span><span class="p">,</span> <span class="n">start_angle</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
           <span class="n">angle_resolution</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/arc.png" class="align-center" src="../_images/arc.png" />
</div>
<div class="section" id="tapers">
<h3>Tapers<a class="headerlink" href="#tapers" title="Permalink to this headline">¶</a></h3>
<p>The taper is defined by setting its length and its start and end length.  It has two ports, <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>, on either end, allowing you to easily connect it to other structures.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">taper</span><span class="p">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">width1</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="n">width2</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">port</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/taper.png" class="align-center" src="../_images/taper.png" />
<p>The ramp structure is similar to the taper except it is asymmetric.  It also has two ports, <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>, on either end.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ramp</span><span class="p">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">width1</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">width2</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/ramp.png" class="align-center" src="../_images/ramp.png" />
</div>
<div class="section" id="common-compound-shapes">
<h3>Common compound shapes<a class="headerlink" href="#common-compound-shapes" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">L</span><span class="p">(</span><span class="n">width</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span> <span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/L.png" class="align-center" src="../_images/L.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">C</span><span class="p">(</span><span class="n">width</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span> <span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/C.png" class="align-center" src="../_images/C.png" />
</div>
</div>
<div class="section" id="text">
<h2>Text<a class="headerlink" href="#text" title="Permalink to this headline">¶</a></h2>
<p>PHIDL has an implementation of the DEPLOF font with the majority of english ASCII characters represented.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Hello world!</span><span class="se">\n</span><span class="s1">Multiline text</span><span class="se">\n</span><span class="s1">Left-justified&#39;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
            <span class="n">justify</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># `justify` should be either &#39;left&#39;, &#39;center&#39;, or &#39;right&#39;</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/text.png" class="align-center" src="../_images/text.png" />
</div>
<div class="section" id="packer-align-distribute">
<h2>Packer / align / distribute<a class="headerlink" href="#packer-align-distribute" title="Permalink to this headline">¶</a></h2>
<div class="section" id="packer">
<h3>Packer<a class="headerlink" href="#packer" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.packer()</span></code> function is able to pack geometries together into rectangular bins. If a <code class="docutils literal notranslate"><span class="pre">max_size</span></code> is specified, the function will create as many bins as is necessary to pack all the geometries and then return a list of the filled-bin Devices.</p>
<p>Here we generate several random shapes then pack them together automatically. We allow the bin to be as large as needed to fit all the Devices by specifying <code class="docutils literal notranslate"><span class="pre">max_size</span> <span class="pre">=</span> <span class="pre">(None,</span> <span class="pre">None)</span></code>.  By setting <code class="docutils literal notranslate"><span class="pre">aspect_ratio</span> <span class="pre">=</span> <span class="pre">(2,1)</span></code>, we specify the rectangular bin it tries to pack them into should be twice as wide as it is tall:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">D_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">radii</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)]</span>
<span class="n">D_list</span> <span class="o">+=</span> <span class="p">[</span><span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">)]</span>

<span class="n">D_packed_list</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">packer</span><span class="p">(</span>
        <span class="n">D_list</span><span class="p">,</span>                 <span class="c1"># Must be a list or tuple of Devices</span>
        <span class="n">spacing</span> <span class="o">=</span> <span class="mf">1.25</span><span class="p">,</span>         <span class="c1"># Minimum distance between adjacent shapes</span>
        <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>   <span class="c1"># (width, height) ratio of the rectangular bin</span>
        <span class="n">max_size</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">),</span> <span class="c1"># Limits the size into which the shapes will be packed</span>
        <span class="n">density</span> <span class="o">=</span> <span class="mf">1.05</span><span class="p">,</span>          <span class="c1"># Values closer to 1 pack tighter but require more computation</span>
        <span class="n">sort_by_area</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>    <span class="c1"># Pre-sorts the shapes by area</span>
        <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">D_packed_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># Only one bin was created, so we plot that</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/packer1.png" class="align-center" src="../_images/packer1.png" />
<p>Say we need to pack many shapes into multiple 500x500 unit die. If we set <code class="docutils literal notranslate"><span class="pre">max_size</span> <span class="pre">=</span> <span class="pre">(500,500)</span></code> the shapes will be packed into as many 500x500 unit die as required to fit them all:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">D_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">radii</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">120</span><span class="p">)]</span>
<span class="n">D_list</span> <span class="o">+=</span> <span class="p">[</span><span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">120</span><span class="p">)]</span>

<span class="n">D_packed_list</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">packer</span><span class="p">(</span>
        <span class="n">D_list</span><span class="p">,</span>                 <span class="c1"># Must be a list or tuple of Devices</span>
        <span class="n">spacing</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>         <span class="c1"># Minimum distance between adjacent shapes</span>
        <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>   <span class="c1"># Shape of the box</span>
        <span class="n">max_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="mi">500</span><span class="p">),</span>   <span class="c1"># Limits the size into which the shapes will be packed</span>
        <span class="n">density</span> <span class="o">=</span> <span class="mf">1.05</span><span class="p">,</span>         <span class="c1"># Values closer to 1 pack tighter but require more computation</span>
        <span class="n">sort_by_area</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>    <span class="c1"># Pre-sorts the shapes by area</span>
        <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

<span class="c1"># Put all packed bins into a single device and spread them out with distribute()</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="p">[</span><span class="n">F</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="k">for</span> <span class="n">D</span> <span class="ow">in</span> <span class="n">D_packed_list</span><span class="p">]</span>
<span class="n">F</span><span class="o">.</span><span class="n">distribute</span><span class="p">(</span><span class="n">elements</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">spacing</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">separation</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/packer2.png" class="align-center" src="../_images/packer2.png" />
<p>Note that the packing problem is an NP-complete problem, so <code class="docutils literal notranslate"><span class="pre">pg.packer()</span></code> may be slow if there are more than a few hundred Devices to pack (in that case, try pre-packing a few dozen at a time then packing the resulting bins). Requires the <code class="docutils literal notranslate"><span class="pre">rectpack</span></code> python package.</p>
</div>
<div class="section" id="distribute">
<h3>Distribute<a class="headerlink" href="#distribute" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">distribute()</span></code> function allows you to space out elements within a Device evenly in the x or y direction.  It is meant to duplicate the distribute functionality present in Inkscape / Adobe Illustrator:</p>
<img alt="../_images/inkscape_distribute.png" class="align-center" src="../_images/inkscape_distribute.png" />
<p>Say we start out with a few random-sized rectangles we want to space out:</p>
<img alt="../_images/distribute1.png" class="align-center" src="../_images/distribute1.png" />
<p>Oftentimes, we want to guarantee some distance between the objects.  By setting <code class="docutils literal notranslate"><span class="pre">separation</span> <span class="pre">=</span> <span class="pre">True</span></code> we move each object such that there is <code class="docutils literal notranslate"><span class="pre">spacing</span></code> distance between them:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="c1"># Create different-sized rectangles and add them to D</span>
<span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">])</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">4</span><span class="p">)))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
<span class="c1"># Distribute all the rectangles in D along the x-direction with a separation of 5</span>
<span class="n">D</span><span class="o">.</span><span class="n">distribute</span><span class="p">(</span><span class="n">elements</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span>   <span class="c1"># either &#39;all&#39; or a list of objects</span>
             <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span>    <span class="c1"># &#39;x&#39; or &#39;y&#39;</span>
             <span class="n">spacing</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
             <span class="n">separation</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/distribute2.png" class="align-center" src="../_images/distribute2.png" />
<p>Alternatively, we can spread them out on a fixed grid by setting <code class="docutils literal notranslate"><span class="pre">separation</span> <span class="pre">=</span> <span class="pre">False</span></code>. Here we align the left edge (<code class="docutils literal notranslate"><span class="pre">edge</span> <span class="pre">=</span> <span class="pre">'min'</span></code>) of each object along a grid spacing of 100:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">])</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">4</span><span class="p">)))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
<span class="n">D</span><span class="o">.</span><span class="n">distribute</span><span class="p">(</span><span class="n">elements</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">spacing</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">separation</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
             <span class="n">edge</span> <span class="o">=</span> <span class="s1">&#39;min&#39;</span><span class="p">)</span> <span class="c1"># edge must be either &#39;min&#39;, &#39;max&#39;, or &#39;center&#39;</span>

<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/distribute3.png" class="align-center" src="../_images/distribute3.png" />
<p>The alignment can be done along the right edge as well by setting <code class="docutils literal notranslate"><span class="pre">edge</span> <span class="pre">=</span> <span class="pre">'max'</span></code>, or along the center by setting <code class="docutils literal notranslate"><span class="pre">edge</span> <span class="pre">=</span> <span class="pre">'center'</span></code> like in the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">])</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">n</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">4</span><span class="p">)))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
<span class="n">D</span><span class="o">.</span><span class="n">distribute</span><span class="p">(</span><span class="n">elements</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">spacing</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">separation</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
             <span class="n">edge</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span><span class="p">)</span>  <span class="c1"># edge must be either &#39;min&#39;, &#39;max&#39;, or &#39;center&#39;</span>

<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/distribute4.png" class="align-center" src="../_images/distribute4.png" />
</div>
<div class="section" id="align">
<h3>Align<a class="headerlink" href="#align" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">align()</span></code> function allows you to elements within a Device horizontally or vertically.  It is meant to duplicate the alignment functionality present in Inkscape / Adobe Illustrator:</p>
<img alt="../_images/inkscape_align.png" class="align-center" src="../_images/inkscape_align.png" />
<p>Say we <code class="docutils literal notranslate"><span class="pre">distribute()</span></code> a few objects, but they’re all misaligned:</p>
<img alt="../_images/align1.png" class="align-center" src="../_images/align1.png" />
<p>we can use the <code class="docutils literal notranslate"><span class="pre">align()</span></code> function to align their top edges (<a href="#id1"><span class="problematic" id="id2">``</span></a>alignment = ‘ymax’):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="c1"># Create different-sized rectangles and add them to D then distribute them</span>
<span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">])</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">4</span><span class="p">)))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
<span class="n">D</span><span class="o">.</span><span class="n">distribute</span><span class="p">(</span><span class="n">elements</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">spacing</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">separation</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="c1"># Align top edges</span>
<span class="n">D</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">elements</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">alignment</span> <span class="o">=</span> <span class="s1">&#39;ymax&#39;</span><span class="p">)</span>

<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/align2.png" class="align-center" src="../_images/align2.png" />
<p>or align their centers (<a href="#id3"><span class="problematic" id="id4">``</span></a>alignment = ‘y’):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="c1"># Create different-sized rectangles and add them to D then distribute them</span>
<span class="p">[</span><span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">15</span><span class="o">+</span><span class="mi">20</span><span class="p">])</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="mi">4</span><span class="p">)))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
<span class="n">D</span><span class="o">.</span><span class="n">distribute</span><span class="p">(</span><span class="n">elements</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">spacing</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">separation</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="c1"># Align top edges</span>
<span class="n">D</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">elements</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">alignment</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span>

<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/align3.png" class="align-center" src="../_images/align3.png" />
<p>other valid alignment options include <code class="docutils literal notranslate"><span class="pre">'xmin',</span> <span class="pre">'x',</span> <span class="pre">'xmax',</span> <span class="pre">'ymin',</span> <span class="pre">'y',</span> <span class="pre">and</span> <span class="pre">'ymax'</span></code></p>
</div>
</div>
<div class="section" id="boolean-outline-offset-invert">
<h2>Boolean / outline / offset / invert<a class="headerlink" href="#boolean-outline-offset-invert" title="Permalink to this headline">¶</a></h2>
<p>There are several common boolean-type operations available in the geometry library.  These include typicaly boolean operations (and/or/not/xor), offsetting (expanding/shrinking polygons), outlining, inverting, and</p>
<div class="section" id="boolean">
<h3>Boolean<a class="headerlink" href="#boolean" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.boolean()</span></code> function can perform AND/OR/NOT/XOR operations, and will return a new geometry with the result of that operation.</p>
<p>Speedup note: The <code class="docutils literal notranslate"><span class="pre">num_divisions</span></code> argument can be used to divide up the geometry into multiple rectangular regions and process each region sequentially (which is more computationally efficient).  If you have a large geometry that takes a long time to process, try using <code class="docutils literal notranslate"><span class="pre">num_divisions</span> <span class="pre">=</span> <span class="pre">[10,10]</span></code> to optimize the operation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="n">E</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">radii</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">movey</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">boolean</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="n">E</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="n">R</span><span class="p">,</span> <span class="n">operation</span> <span class="o">=</span> <span class="s1">&#39;not&#39;</span><span class="p">,</span> <span class="n">precision</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">,</span> <span class="n">num_divisions</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># Other operations include &#39;and&#39;, &#39;or&#39;, &#39;xor&#39;, or equivalently &#39;A-B&#39;, &#39;B-A&#39;, &#39;A+B&#39;</span>

<span class="c1"># Plot the originals and the result</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">E</span><span class="p">)</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">C</span><span class="p">)</span><span class="o">.</span><span class="n">movex</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/boolean.png" class="align-center" src="../_images/boolean.png" />
</div>
<div class="section" id="offset">
<h3>Offset<a class="headerlink" href="#offset" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.offset()</span></code> function takes the polygons of the input geometry, combines them together, and expands/contracts them.  The function returns polygons on a single layer – it does not respect layers.</p>
<p>Speedup note: The <code class="docutils literal notranslate"><span class="pre">num_divisions</span></code> argument can be used to divide up the geometry into multiple rectangular regions and process each region sequentially (which is more computationally efficient).  If you have a large geometry that takes a long time to process, try using <code class="docutils literal notranslate"><span class="pre">num_divisions</span> <span class="pre">=</span> <span class="pre">[10,10]</span></code> to optimize the operation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="c1"># Create `T`, an ellipse and rectangle which will be offset (expanded / contracted)</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">T</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">radii</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">T</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">move</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">2.5</span><span class="p">])</span>

<span class="n">Texpanded</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">distance</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">join_first</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">precision</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">,</span> 
        <span class="n">num_divisions</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">Tshrink</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">distance</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">join_first</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">precision</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">,</span> 
        <span class="n">num_divisions</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Plot the original geometry, the expanded, and the shrunk versions</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">Texpanded</span><span class="p">)</span>
<span class="n">t3</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">Tshrink</span><span class="p">)</span>
<span class="n">D</span><span class="o">.</span><span class="n">distribute</span><span class="p">([</span><span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="p">,</span><span class="n">t3</span><span class="p">],</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">spacing</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/offset.png" class="align-center" src="../_images/offset.png" />
</div>
<div class="section" id="outline">
<h3>Outline<a class="headerlink" href="#outline" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.outline()</span></code> function takes the polygons of the input geometry then performs an offset and “not” boolean operation to create an outline.  The function returns polygons on a single layer – it does not respect layers.</p>
<p>Speedup note: The <code class="docutils literal notranslate"><span class="pre">num_divisions</span></code> argument can be used to divide up the geometry into multiple rectangular regions and process each region sequentially (which is more computationally efficient).  If you have a large geometry that takes a long time to process, try using <code class="docutils literal notranslate"><span class="pre">num_divisions</span> <span class="pre">=</span> <span class="pre">[10,10]</span></code> to optimize the operation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="c1"># Create a blank device and add two shapes</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">X</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">X</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">radii</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">2</span><span class="p">))</span>

<span class="n">O</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">outline</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">distance</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">,</span> <span class="n">precision</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Plot the original geometry and the result</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">O</span><span class="p">)</span><span class="o">.</span><span class="n">movex</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/outline.png" class="align-center" src="../_images/outline.png" />
</div>
<div class="section" id="invert">
<h3>Invert<a class="headerlink" href="#invert" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.invert()</span></code> function creates an inverted version of the input geometry.  The function creates a rectangle around the geometry (with extra padding of distance <code class="docutils literal notranslate"><span class="pre">border</span></code>), then subtract all polygons from all layers from that rectangle, resulting in an inverted version of the geometry.</p>
<p>Speedup note: The <code class="docutils literal notranslate"><span class="pre">num_divisions</span></code> argument can be used to divide up the geometry into multiple rectangular regions and process each region sequentially (which is more computationally efficient).  If you have a large geometry that takes a long time to process, try using <code class="docutils literal notranslate"><span class="pre">num_divisions</span> <span class="pre">=</span> <span class="pre">[10,10]</span></code> to optimize the operation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">E</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">radii</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">border</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">precision</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/invert.png" class="align-center" src="../_images/invert.png" />
</div>
<div class="section" id="union">
<h3>Union<a class="headerlink" href="#union" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.union()</span></code> function is a “join” function, and is functionally identical to the “OR” operation of <code class="docutils literal notranslate"><span class="pre">pg.boolean()</span></code>.  The one difference is it’s able to perform this function layer-wise, so each layer can be individually combined.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">D</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">D</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">15</span><span class="o">*</span><span class="mi">1</span><span class="p">)</span>
<span class="n">D</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">15</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="n">D</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">15</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
<span class="n">D</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">15</span><span class="o">*</span><span class="mi">4</span><span class="p">)</span>
<span class="n">D</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">15</span><span class="o">*</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># We have two options to unioning - take all polygons, regardless of </span>
<span class="c1"># layer, and join them together (in this case on layer 4) like so:</span>
<span class="n">D_joined</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">by_layer</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>

<span class="c1"># Or we can perform the union operate by-layer</span>
<span class="n">D_joined_by_layer</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">by_layer</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="c1"># Space out shapes</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">D_joined</span><span class="p">)</span><span class="o">.</span><span class="n">movex</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">D_joined_by_layer</span><span class="p">)</span><span class="o">.</span><span class="n">movex</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/union.png" class="align-center" src="../_images/union.png" />
</div>
<div class="section" id="xor-diff">
<h3>XOR / diff<a class="headerlink" href="#xor-diff" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pg.xor_diff()</span></code> function can be used to compare two geometries and identify where they are different.  Specifically, it performs a layer-wise XOR operation.  If two geometries are identical, the result will be an empty Device.  If they are not identical, any areas not shared by the two geometries will remain.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">A</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">radii</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">A</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">move</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">B</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">radii</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">movex</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="n">B</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">move</span><span class="p">([</span><span class="mf">3.2</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">xor_diff</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="n">B</span><span class="p">,</span> <span class="n">precision</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">)</span>

<span class="c1"># Plot the original geometry and the result</span>
<span class="c1"># Upper left: A / Upper right: B</span>
<span class="c1"># Lower left: A and B / Lower right: A xor B &quot;diff&quot; comparison</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">([</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="mi">25</span><span class="p">])</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">([</span><span class="mi">15</span><span class="p">,</span><span class="mi">25</span><span class="p">])</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">movex</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">)</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">.</span><span class="n">movex</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">)</span>
<span class="n">D</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">movex</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/xor_diff.png" class="align-center" src="../_images/xor_diff.png" />
</div>
</div>
<div class="section" id="lithography-structures">
<h2>Lithography structures<a class="headerlink" href="#lithography-structures" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-resolution">
<h3>Step-resolution<a class="headerlink" href="#step-resolution" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">litho_steps</span><span class="p">(</span>
        <span class="n">line_widths</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">16</span><span class="p">],</span>
        <span class="n">line_spacing</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">height</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/litho_steps.png" class="align-center" src="../_images/litho_steps.png" />
</div>
<div class="section" id="lithographic-star">
<h3>Lithographic star<a class="headerlink" href="#lithographic-star" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">litho_star</span><span class="p">(</span>
        <span class="n">num_lines</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">line_width</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span>
        <span class="n">diameter</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/litho_star.png" class="align-center" src="../_images/litho_star.png" />
</div>
<div class="section" id="calipers-inter-layer-alignment">
<h3>Calipers (inter-layer alignment)<a class="headerlink" href="#calipers-inter-layer-alignment" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">litho_calipers</span><span class="p">(</span>
        <span class="n">notch_size</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>
        <span class="n">notch_spacing</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">num_notches</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
        <span class="n">offset_per_notch</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="n">row_spacing</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">layer1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">layer2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/litho_calipers.png" class="align-center" src="../_images/litho_calipers.png" />
</div>
</div>
<div class="section" id="importing-gds-files">
<h2>Importing GDS files<a class="headerlink" href="#importing-gds-files" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">()</span>
<span class="n">D</span><span class="o">.</span><span class="n">write_gds</span><span class="p">(</span><span class="s1">&#39;myoutput.gds&#39;</span><span class="p">)</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">import_gds</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;myoutput.gds&#39;</span><span class="p">,</span> <span class="n">cellname</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">flatten</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/import_gds.png" class="align-center" src="../_images/import_gds.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">LayerSet</span>
<span class="n">lys</span> <span class="o">=</span> <span class="n">LayerSet</span><span class="p">()</span>
<span class="n">lys</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;lightblue&#39;</span><span class="p">,</span> <span class="n">gds_layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">gds_datatype</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">lys</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="s1">&#39;p+&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">gds_layer</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">gds_datatype</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">lys</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="s1">&#39;p++&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;darkblue&#39;</span><span class="p">,</span> <span class="n">gds_layer</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">gds_datatype</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">lys</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;lightgreen&#39;</span><span class="p">,</span> <span class="n">gds_layer</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">gds_datatype</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">lys</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="s1">&#39;n+&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">gds_layer</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">gds_datatype</span> <span class="o">=</span> <span class="mi">98</span><span class="p">)</span>
<span class="n">lys</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="s1">&#39;n++&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;darkgreen&#39;</span><span class="p">,</span> <span class="n">gds_layer</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">gds_datatype</span> <span class="o">=</span> <span class="mi">99</span><span class="p">)</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">preview_layerset</span><span class="p">(</span><span class="n">lys</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">spacing</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/preview_layerset.png" class="align-center" src="../_images/preview_layerset.png" />
</div>
<div class="section" id="useful-contact-pads-connectors">
<h2>Useful contact pads / connectors<a class="headerlink" href="#useful-contact-pads-connectors" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">compass</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/compass.png" class="align-center" src="../_images/compass.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">compass_multi</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">ports</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;N&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;S&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">},</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/compass_multi.png" class="align-center" src="../_images/compass_multi.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">flagpole</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">25</span><span class="p">),</span> <span class="n">stub_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="n">shape</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="n">taper_type</span> <span class="o">=</span> <span class="s1">&#39;fillet&#39;</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># taper_type should be None, &#39;fillet&#39;, or &#39;straight&#39;</span>

<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/flagpole.png" class="align-center" src="../_images/flagpole.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">straight</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/straight.png" class="align-center" src="../_images/straight.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">connector</span><span class="p">(</span><span class="n">midpoint</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">orientation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/connector.png" class="align-center" src="../_images/connector.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">tee</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">stub_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">taper_type</span> <span class="o">=</span> <span class="s1">&#39;fillet&#39;</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># taper_type should be None, &#39;fillet&#39;, or &#39;straight&#39;</span>

<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/tee.png" class="align-center" src="../_images/tee.png" />
</div>
<div class="section" id="chip-die-template">
<h2>Chip / die template<a class="headerlink" href="#chip-die-template" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">basic_die</span><span class="p">(</span>
              <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">),</span>  <span class="c1"># Size of die</span>
              <span class="n">street_width</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>   <span class="c1"># Width of corner marks for die-sawing</span>
              <span class="n">street_length</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="c1"># Length of corner marks for die-sawing</span>
              <span class="n">die_name</span> <span class="o">=</span> <span class="s1">&#39;chip99&#39;</span><span class="p">,</span>  <span class="c1"># Label text</span>
              <span class="n">text_size</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>      <span class="c1"># Label text size</span>
              <span class="n">text_location</span> <span class="o">=</span> <span class="s1">&#39;SW&#39;</span><span class="p">,</span> <span class="c1"># Label text compass location e.g. &#39;S&#39;, &#39;SE&#39;, &#39;SW&#39;</span>
              <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
              <span class="n">draw_bbox</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
              <span class="n">bbox_layer</span> <span class="o">=</span> <span class="mi">99</span><span class="p">,</span>
              <span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/basic_die.png" class="align-center" src="../_images/basic_die.png" />
</div>
<div class="section" id="optimal-superconducting-curves">
<h2>Optimal superconducting curves<a class="headerlink" href="#optimal-superconducting-curves" title="Permalink to this headline">¶</a></h2>
<p>The following structures are meant to reduce “current crowding” in superconducting thin-film structures (such as superconducting nanowires).  They are the result of conformal mapping equations derived in  Clem, J. &amp; Berggren, K. “Geometry-dependent critical currents in superconducting nanocircuits.” Phys. Rev. B 84, 1–27 (2011). <a href="#id5"><span class="problematic" id="id6">``</span></a>link to paper &lt;<a class="reference external" href="http://dx.doi.org/10.1103/PhysRevB.84.174510">http://dx.doi.org/10.1103/PhysRevB.84.174510</a>&gt;``_</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">optimal_hairpin</span><span class="p">(</span><span class="n">width</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">pitch</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">turn_ratio</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">num_pts</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/optimal_hairpin.png" class="align-center" src="../_images/optimal_hairpin.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">optimal_step</span><span class="p">(</span><span class="n">start_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">end_width</span> <span class="o">=</span> <span class="mi">22</span><span class="p">,</span> <span class="n">num_pts</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span> <span class="n">width_tol</span> <span class="o">=</span> <span class="mf">1e-3</span><span class="p">,</span>
                 <span class="n">anticrowding_factor</span> <span class="o">=</span> <span class="mf">1.2</span><span class="p">,</span> <span class="n">symmetric</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/optimal_step.png" class="align-center" src="../_images/optimal_step.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">optimal_90deg</span><span class="p">(</span><span class="n">width</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">,</span> <span class="n">num_pts</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">length_adjust</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/optimal_90deg.png" class="align-center" src="../_images/optimal_90deg.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">snspd</span><span class="p">(</span><span class="n">wire_width</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">wire_pitch</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
        <span class="n">num_squares</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">turn_ratio</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
        <span class="n">terminals_same_side</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/snspd.png" class="align-center" src="../_images/snspd.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">snspd_expanded</span><span class="p">(</span><span class="n">wire_width</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">wire_pitch</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
           <span class="n">num_squares</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">connector_width</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">connector_symmetric</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">turn_ratio</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">terminals_same_side</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/snspd_expanded.png" class="align-center" src="../_images/snspd_expanded.png" />
</div>
<div class="section" id="copying-and-extracting-geometry">
<h2>Copying and extracting geometry<a class="headerlink" href="#copying-and-extracting-geometry" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">Device</span>

<span class="n">E</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">E</span><span class="o">.</span><span class="n">add_ref</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">layer</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">}))</span>
<span class="c1">#X = pg.ellipse(layer = {0,1})</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">layers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/extract.png" class="align-center" src="../_images/extract.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">()</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/copy.png" class="align-center" src="../_images/copy.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">()</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/deepcopy.png" class="align-center" src="../_images/deepcopy.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">phidl.geometry</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">phidl</span> <span class="kn">import</span> <span class="n">quickplot</span> <span class="k">as</span> <span class="n">qp</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">X</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">layer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">X</span> <span class="o">&lt;&lt;</span> <span class="n">pg</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">copy_layer</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">new_layer</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">qp</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="c1"># quickplot the geometry</span>
</pre></div>
</div>
<img alt="../_images/copy_layer.png" class="align-center" src="../_images/copy_layer.png" />
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">phidl_geometry_test</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Adam McCaughan.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/docs/geometry.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>